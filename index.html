<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<title>lavender 測試 landing page</title>
	<script>
	
		var search = {
			get: function(name) {
			    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			        results = regex.exec(location.search);
			    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			},
			set: function(key, value) {
				var uri = location.search;
	  			var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
	  			var separator = uri.indexOf('?') !== -1 ? "&" : "?";
	  			
	  			if (uri.match(re)) {
	  				history.pushState("", "", location.pathname + uri.replace(re, '$1' + key + "=" + value + '$2'));
	  			} else {
	  				history.pushState("", "", location.pathname + separator + key + "=" + value);
	  			}
			}	
		};
		
		var query = {
			rl: document.referrer,
			sr: screen.width + "x" + screen.height, // screen resolution
			dl: window.location.href, // ex. http://psk_.com/about
			dp: window.location.pathname, // ex. /about
			ul: navigator.language || navigator.userLanguage, //user langage
			sd: screen.colorDepth + "-bit", // color depth
			dt: document.title, // html title
			ctime: (new Date()).toISOString(), // client timestamp
			z: Math.random() // cache buster,
		};
		
		console.log(query);
		search.set("test", "aaa");
		console.log("qs test:", location.search);
	</script>
</head>
<html>
	<body>
		<button type="button" onclick="console.log('button clicked')">Click Me!</button>
	</body>
</html>
